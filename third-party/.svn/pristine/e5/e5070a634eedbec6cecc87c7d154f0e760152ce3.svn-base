<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009"
               xmlns:s="library://ns.adobe.com/flex/spark"
               xmlns:esri="http://www.esri.com/2008/ags"
               pageTitle="Example - using layerDefinitions to only show subset of content from specific layers">
    <!--
         Layer definitions are sent to the server where the dynamic maps will use them for filtering.
    -->
    <s:layout>
        <s:VerticalLayout gap="10"
                          horizontalAlign="center"
                          paddingBottom="20"
                          paddingLeft="20"
                          paddingRight="20"
                          paddingTop="20"/>
    </s:layout>
    <fx:Script>
        <![CDATA[
            import mx.events.FlexEvent;

            protected function myDynamicLayer_initializeHandler(event:FlexEvent):void
            {
                // Colorado is FIPS = '08'
                myDynamicLayer.layerDefinitions =
                    [
                    "STATE_FIPS = '08'",
                    "STATE_FIPS = '08'",
                    null, // just the group layer
                    "STATE_FIPS = '08'",
                    "STATE_FIPS = '08'",
                    "STATE_FIPS = '08'",
                    ];
            }
        ]]>
    </fx:Script>

    <s:Label width="100%" text="Using layerdefinitions on ArcGISDynamicMapServiceLayer to only show data for one state"/>
    <esri:Map>
        <esri:extent>
            <esri:Extent xmin="-13013000" ymin="4041000" xmax="-10383000" ymax="5354000">
                <esri:SpatialReference wkid="102100"/>
            </esri:Extent>
        </esri:extent>
        <esri:ArcGISTiledMapServiceLayer alpha="0.5" url="http://server.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer"/>
        <esri:ArcGISDynamicMapServiceLayer id="myDynamicLayer"
                                           initialize="myDynamicLayer_initializeHandler(event)"
                                           url="http://sampleserver1.arcgisonline.com/ArcGIS/rest/services/Demographics/ESRI_Census_USA/MapServer"/>
    </esri:Map>
</s:Application>
